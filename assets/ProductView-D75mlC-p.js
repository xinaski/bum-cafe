import{r as g,o as I,m as T,j as V,c,b as n,d as s,e as m,w as u,f as B,k as h,t as i,n as k,F as w,h as C,l as O,s as P,p as R,i as a,g as p,q as L}from"./index-CrUKkh_s.js";import{P as N,f as $,_ as D}from"./ProductCard-AoD2w3R4.js";const F={class:"container-page py-8"},q={key:0,class:"py-16 text-center"},U={key:1},j={class:"text-sm text-slate-500 mb-6"},J={class:"text-slate-700"},M={class:"grid md:grid-cols-2 gap-8"},z={class:"rounded-2xl border border-slate-200 overflow-hidden bg-white"},Q=["src","alt"],G={key:1,class:"w-full h-[360px] md:h-[480px] grid place-items-center bg-slate-50 text-slate-500"},H={class:"flex flex-col"},K={class:"mb-2"},W={class:"text-3xl md:text-4xl font-extrabold tracking-tight text-bum-base transform scale-x-125 origin-left"},X={class:"text-slate-600 mt-3"},Y={class:"mt-5 flex items-center gap-3"},Z={class:"text-2xl font-bold"},tt={class:"text-sm text-slate-500"},et={key:0,class:"mt-6"},st={class:"flex flex-wrap gap-2"},lt={key:0},at={key:1},ot={class:"mt-6 flex items-center gap-3"},nt={class:"mt-4 flex items-center gap-3"},it={key:0,class:"my-24"},rt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},mt={__name:"ProductView",setup(ut){const x=T();R();const e=g(null),d=g(1),v=g(!1);function f(l){e.value=$(l)||null,v.value=!1,d.value=1}I(()=>f(x.params.slug)),V(()=>x.params.slug,l=>f(l));const b=c(()=>e.value?N.filter(l=>l.tipus===e.value.tipus&&l.nom===e.value.nom).sort((l,t)=>(l.format||"").localeCompare(t.format||"")||(l.mida||l.unitats||0)-(t.mida||t.unitats||0)):[]),_=c(()=>e.value?N.filter(l=>l.tipus===e.value.tipus&&l.id!==e.value.id).slice(0,3):[]),y=c(()=>e.value?e.value.tipus==="collonut"?"COLLONUT":e.value.tipus==="espavilat"?"ESPAVILAâ€™T":"DE LA IAIA":""),S=c(()=>e.value?e.value.format==="capsules"?`cÃ psules (${e.value.unitats}u)`:e.value.mida?`${e.value.format} Â· ${e.value.mida}g`:e.value.format:"");function E(){const l="bum-cart-demo",t=JSON.parse(localStorage.getItem(l)||"[]");t.push({id:e.value.id,slug:e.value.slug,qty:d.value,price:e.value.preu}),localStorage.setItem(l,JSON.stringify(t)),alert("Afegit al carret ðŸ›’ (demo)")}function A(){v.value=!0}return(l,t)=>{const r=B("RouterLink");return a(),n("section",F,[e.value?(a(),n("div",U,[s("nav",j,[m(r,{to:"/",class:"hover:underline"},{default:u(()=>[...t[4]||(t[4]=[p("Inici",-1)])]),_:1}),t[6]||(t[6]=s("span",{class:"mx-2"},"/",-1)),m(r,{to:"/botiga",class:"hover:underline"},{default:u(()=>[...t[5]||(t[5]=[p("Botiga",-1)])]),_:1}),t[7]||(t[7]=s("span",{class:"mx-2"},"/",-1)),s("span",J,i(y.value),1)]),s("div",M,[s("div",z,[!v.value&&e.value.img?(a(),n("img",{key:0,src:e.value.img,alt:e.value.desc||e.value.nom,class:"w-full h-[360px] md:h-[480px] object-contain bg-white",onError:A},null,40,Q)):(a(),n("div",G," Sense imatge "))]),s("div",H,[s("div",K,[s("span",{class:k(["inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold",{"bg-collonut/10 text-collonut":e.value.tipus==="collonut","bg-espavilat/10 text-espavilat":e.value.tipus==="espavilat","bg-delaiaia/10 text-delaiaia":e.value.tipus==="delaiaia"}])},i(y.value),3)]),s("h1",W,i(e.value.nom),1),s("p",X,i(e.value.desc),1),s("div",Y,[s("span",Z,i(e.value.preu.toFixed(2))+"â‚¬",1),s("span",tt,"Â· "+i(S.value),1)]),b.value.length>1?(a(),n("div",et,[t[8]||(t[8]=s("p",{class:"text-sm text-slate-500 mb-2"},"Formats disponibles",-1)),s("div",st,[(a(!0),n(w,null,C(b.value,o=>(a(),L(r,{key:o.id,to:`/producte/${o.slug}`,class:k(["px-3 py-1.5 rounded-xl border text-sm",o.id===e.value.id?"bg-slate-900 text-white border-slate-900":"bg-white hover:bg-slate-50 border-slate-300"])},{default:u(()=>[o.format==="capsules"?(a(),n("span",lt,"cÃ psules ("+i(o.unitats)+"u)",1)):(a(),n("span",at,i(o.format)+" Â· "+i(o.mida)+"g",1))]),_:2},1032,["to","class"]))),128))])])):h("",!0),s("div",ot,[t[9]||(t[9]=s("label",{class:"text-sm text-slate-600"},"Quantitat",-1)),O(s("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>d.value=o),type:"number",min:"1",max:"10",class:"w-20 rounded-xl border px-3 py-2"},null,512),[[P,d.value,void 0,{number:!0}]])]),s("div",nt,[s("button",{class:"btn btn-primary",onClick:E},"A dins del carro, collons!"),m(r,{to:"/botiga",class:"btn btn-ghost border-2"},{default:u(()=>[...t[10]||(t[10]=[p("Continua comprant",-1)])]),_:1})]),t[11]||(t[11]=s("ul",{class:"mt-6 text-sm text-slate-600 space-y-1"},[s("li",null,"â€¢ Enviament 24-48h"),s("li",null,"â€¢ Origen seleccionat i torrat recent"),s("li",null,"â€¢ Compatible amb NespressoÂ® (cÃ psules)")],-1))])]),_.value.length?(a(),n("section",it,[t[12]||(t[12]=s("h2",{class:"text-3xl font-semibold tracking-wide uppercase transform scale-x-125 origin-left"}," Et pot interessar ",-1)),s("div",rt,[(a(!0),n(w,null,C(_.value,o=>(a(),L(D,{key:o.id,p:o},null,8,["p"]))),128))])])):h("",!0)])):(a(),n("div",q,[t[2]||(t[2]=s("p",{class:"text-2xl font-bold mb-2"},"No hem trobat el producte",-1)),t[3]||(t[3]=s("p",{class:"text-slate-600 mb-6"},"Potser sâ€™ha mogut o el link no Ã©s correcte.",-1)),m(r,{to:"/botiga",class:"btn btn-primary"},{default:u(()=>[...t[1]||(t[1]=[p("Torna a la botiga company",-1)])]),_:1})]))])}}};export{mt as default};
